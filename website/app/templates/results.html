{% extends "base.html" %}
{% block title %}Voting Statistics{% endblock %}

{% block custom_css %}
   <link rel="stylesheet" href="static/css/results.css">
   <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
   <script src="static/script/results.js"></script>
{% endblock %}

{% block content %}

<div class="container whole">
    
	<h1>Voting Statistics</h1>

    <div class="row">
		  
		<div class="col-12 col-lg-6  tab">
			
			<table class="table">

                <thead>
				   
					<th>Sr.No.</th>
					<th>Name</th>
					<th>Political Party</th>
					<th>Total Votes</th>

				</thead>

				<tbody>

					{% for i in range(candidateList|length) %}

					<tr>

						<td>{{i+1}}</td>
						<td>{{candidateList[i]['name']}}</td>
						<td>{{candidateList[i]['party']}}</td>
						<td>{{candidateList[i]['votes']}}</td>

					</tr>
					
					{% endfor %}
					
				</tbody>

            </table>

		</div>	

		<div class="col-12 col-lg-6 pie">

             <canvas id="pie-chart">

             </canvas>

		</div>     
		
	</div>
	  
</div>


<script>

    var partyList = []
    var voteList = []

    {% for candidate in candidateList %}
    {% if candidate['votes'] != 0 %}
    partyList.push('{{candidate['party']}}')
    voteList.push('{{candidate['votes']}}')
    {% endif %}
    {% endfor %}
    createGraph(partyList, voteList)

</script>


{% endblock %}   
